{% extends 'standard.html' %}{% load humanize static %}

{% block title %}{{ campus.name }}{% endblock title %}

{% block breadcrumbs %}
<nav class="breadcrumbs">
  <a class="breadcrumbs__item" href="{% url 'landing' %}">{% trans "Home" %}</a> » <a class="breadcrumbs__item" href="{% url 'districts:list' %}">{% trans "School Districts" %}</a> » <a class="breadcrumbs__item" href="{{ campus.district.get_absolute_url }}">{{ campus.district.name }}</a>
</nav>
{% endblock breadcrumbs %}

{% block content %}

<section class="row">
<div class="col-8">
<header class="page-header">
  <h1 class="page-headline">{{ campus.name }}</h1>
  <p class="page-subtext">{{ campus.city|title }}, {{ campus.state }} | <a href="{{ campus.district.get_absolute_url }}">{{ campus.district.name }}</a></p>
  <p class="page-subtext">{{ campus.get_school_type_display }}</p>
  <p class="page-subtext">{{ campus.get_low_grade_display }} - {{ campus.get_high_grade_display }}</p>
</header>

<div class="stats-group">
  <div class="stats-item">
    <div class="stats-item-title">No. of Students</div>
    <div class="stats-item-number">{{ campus.stats.first.all_students_count|intcomma }}</div>
  </div>
  <div class="stats-item">
    <div class="stats-item-title">Students per Teacher</div>
    <div class="stats-item-number">{{ campus.stats.first.students_per_teacher|floatformat }}</div>
  </div>
  <div class="stats-item">
    <div class="stats-item-title">Avg. SAT Score</div>
    <div class="stats-item-number">{{ campus.stats.first.avg_sat_score_all_students|default:"N/A" }}</div>
  </div>
  <div class="stats-item">
    <div class="stats-item-title">Attendance Rate</div>
    <div class="stats-item-number">{{ campus.stats.first.attendance_rate|floatformat }}%</div>
  </div>
</div>

<div class="page-prose">
  <p>
    {% blocktrans with campusName=campus.name schoolType=campus.get_school_type_display|lower districtName=campus.district.name studentCount=campus.stats.first.all_students_count|intcomma year=campus.stats.first.year count studentCount=campus.stats.first.all_students_count.length%}
      {{ campusName }} is a {{ schoolType }} in the {{ districtName }} district. There was {{ studentCount }} student during the {{ year }} school year.
    {% plural %}
      {{ campusName }} is a {{ schoolType }} in the {{ districtName }} district. There were {{ studentCount }} students during the {{ year }} school year.
    {% endblocktrans %}
  </p>
</div>

</div>

<div class="col-4">
  <div class="map" id="map"></div>
  <div class="card">
    <h3 class="card-title">Address</h3>
    <address class="card-address">
      {{ campus.street|title }}<br>
      {{ campus.location }} {{ campus.zip_code }}
    </address>
    <h3 class="card-title">{% trans "Phone number" %}</h3>
    <p class="card-text"><a href="tel://{{ campus.phone }}">{{ campus.phone }}</a></p>
    {% if campus.principals.all %}
    <h3 class="card-title">
      {% blocktrans count numberOfPrincipals=campus.principals.all.length %}
        Principal
      {%  plural %}
        Principals
      {% endblocktrans %}
    </h3>
    <ul class="card-list">
    {% for principal in campus.principals.all %}
      <li class="card-list-item">{{ principal.name }}</li>
      <li class="card-list-item"><a href="mailto:{{ principal.email }}">{{ principal.email }}</a></li>
      <li class="card-list-item"><a href="tel://{{ principal.phone_number }}">{{ principal.phone_number }}</a></li>
    {% endfor %}
    </ul>
    {% endif %}
  </div>
</div>
</section>

<div class="ad-slot ad-slot-banner">
  <img src="https://placehold.it/728x90">
</div>

<h2 class="page-sub-header">Demographics</h2>

<section class="card">
  HI
</section>

<h2 class="page-sub-header">College Readiness</h2>

<h2 class="page-sub-header">Staff</h2>

{% comment %}
{% for stat in campus.stats.all %}
<section class="card">
  <h3>{{ stat.year.name }}</h3>
  <p>{% trans "No. of Students: " %}{{ stat.all_students_count }}</p>
</section>
{% endfor %}
{% endcomment %}

{% endblock content %}

{% block extra_script %}
<script>COORDS = {{ campus.coordinates.geojson|safe }};</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBrkB4T_tbnnFklJsJ_1jk8JwEpzhOYyKc"></script>
<script src="{% static 'scripts/campus.js' %}"></script>
{% endblock extra_script %}
