{% extends 'standard.html' %}{% load humanize static %}

{% block title %}{{ campus.name }}{% endblock title %}

{% block breadcrumbs %}
<nav class="breadcrumbs">
  <a class="breadcrumbs__item" href="{% url 'landing' %}">{% trans "Home" %}</a> » <a class="breadcrumbs__item" href="{% url 'districts:list' %}">{% trans "School Districts" %}</a> » <a class="breadcrumbs__item" href="{{ campus.district.get_absolute_url }}">{{ campus.district.name }}</a>
</nav>
{% endblock breadcrumbs %}

{% block content %}

<div class="box-8">
<header class="page-header">
  <h1 class="page-headline">{{ campus.name }}</h1>
  <p class="page-subtext">{{ campus.city|title }}, {{ campus.state }} | <a href="{{ campus.district.get_absolute_url }}">{{ campus.district.name }}</a></p>
  <p class="page-subtext">{{ campus.get_school_type_display }}</p>
  <p class="page-subtext">{{ campus.get_low_grade_display }} - {{ campus.get_high_grade_display }}</p>
</header>

<div class="page-prose">
  <p>
    {% blocktrans with campusName=campus.name schoolType=campus.get_school_type_display|lower districtName=campus.district.name studentCount=campus.stats.first.all_students_count|intcomma year=campus.stats.first.year count studentCount=campus.stats.first.all_students_count.length%}
      {{ campusName }} is a {{ schoolType }} in the {{ districtName }} district. There was {{ studentCount }} student during the {{ year }} school year.
    {% plural %}
      {{ campusName }} is a {{ schoolType }} in the {{ districtName }} district. There were {{ studentCount }} students during the {{ year }} school year.
    {% endblocktrans %}
  </p>
</div>
</div>

<div class="box-4">
  <div class="map" id="map"></div>
  <div class="card">
    <h3 class="card-title">Address</h3>
    <address class="card-address">
      {{ campus.street|title }}<br>
      {{ campus.location }} {{ campus.zip_code }}
    </address>
    <h3 class="card-title">{% trans "Phone number" %}</h3>
    <p class="card-text">{{ campus.phone }}</p>
    {% if campus.principals.all %}
    <h3 class="card-title">
      {% blocktrans count numberOfPrincipals=campus.principals.all.length %}
        Principal
      {%  plural %}
        Principals
      {% endblocktrans %}
    </h3>
    <ul class="card-list">
    {% for principal in campus.principals.all %}
      <li class="card-list-item">{{ principal.name }}</li>
    {% endfor %}
    </ul>
    {% endif %}
  </div>
</div>

{% comment %}
{% for stat in campus.stats.all %}
<section class="card">
  <h3>{{ stat.year.name }}</h3>
  <p>{% trans "No. of Students: " %}{{ stat.all_students_count }}</p>
</section>
{% endfor %}
{% endcomment %}

<div class="ad-slot ad-slot-banner">
  <img src="https://placehold.it/728x90">
</div>

{% endblock content %}

{% block extra_script %}
<script>COORDS = {{ campus.coordinates.geojson|safe }};</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBrkB4T_tbnnFklJsJ_1jk8JwEpzhOYyKc"></script>
<script src="{% static 'scripts/campus.js' %}"></script>
{% endblock extra_script %}
