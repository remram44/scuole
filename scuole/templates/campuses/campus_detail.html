{% extends 'standard.html' %}{% load humanize i18n static %}

{% block title %}{{ campus.name }}{% endblock title %}

{% block breadcrumbs %}
<nav class="breadcrumbs">
  <a class="breadcrumbs__item" href="{% url 'landing' %}">{% trans "Home" %}</a> » <a class="breadcrumbs__item" href="{% url 'districts:list' %}">{% trans "School Districts" %}</a> » <a class="breadcrumbs__item" href="{{ campus.district.get_absolute_url }}">{{ campus.district.name }}</a>
</nav>
{% endblock breadcrumbs %}

{% block content %}

<section class="row section">
<div class="intro-block">
<header class="page-header">
  <h1 class="page-headline">{{ campus.name }}</h1>
  <ul>
    <li class="page-subtext">{% if campus.location %}{{ campus.location }} | {% endif %}<a href="{{ campus.district.get_absolute_url }}">{{ campus.district.name }}</a></li>
    <li class="page-subtext">{{ campus.get_school_type_display }}</li>
    <li class="page-subtext">{{ campus.get_low_grade_display }} - {{ campus.get_high_grade_display }}</li>
  </ul>
</header>

{% include "includes/intro_metrics.html" with stat=stat state=state district_name=campus.district.name district=district only %}

<section class="page-prose">
  <p><strong>{{ campus.name }}</strong> is a {{ campus.get_school_type_display|lower }} in <strong>{{ campus.location|default:"Texas" }}</strong>. It is in the <strong>{{ campus.district.name }}</strong> school district. As of the <strong>{{ stat.year.name }} school year</strong>, it had <strong>{{ stat.all_students_count|intcomma }} students</strong>.</p>
  <p>Teachers on average have a salary of <strong>${{ stat.teacher_avg_base_salary|floatformat:"0"|intcomma }}</strong>.</p>
</section>

</div>
<div class="contact-block">
<div class="map" id="map-campus"></div>

<section class="card">
  <h2 class="card-header">Contact information</h2>
  <h3 class="card-title">{% trans "Address" %}</h3>
  <address class="card-address">
    {{ campus.street|title }}<br>
    {{ campus.location }} {{ campus.zip_code }}
  </address>
  <h3 class="card-title">{% trans "Phone number" %}</h3>
  <p class="card-text"><a href="tel://{{ campus.phone_number }}">{{ campus.phone_number }}</a></p>
  {% if campus.principals.all %}
  <h3 class="card-title">
  {% blocktrans count numberOfPrincipals=campus.principals.count %}
    Principal
  {%  plural %}
    Principals
  {% endblocktrans %}
  </h3>
  <ul class="card-list">
  {% for principal in campus.principals.all %}
    <li class="card-list-item">{{ principal.name }}</li>
    <li class="card-list-item"><a href="mailto:{{ principal.email }}">{{ principal.email }}</a></li>
    <li class="card-list-item"><a href="tel://{{ principal.phone_number }}">{{ principal.phone_number }}</a></li>
  {% endfor %}
  </ul>
  {% endif %}
</section>
</div>
</section>

<div class="ad-slot ad-slot-banner">
  <img src="https://placehold.it/728x90">
</div>

<section id="js-bumper-check" class="row">

<nav class="col-3">
  <ul id="js-bumper" class="metrics-jumper">
    <li class="metrics-jumper__item btn btn-dark">Demographics<span class="metrics-jumper__arrow"></li></span>
    <li class="metrics-jumper__item btn btn-dark">Academics</li>
    {% if campus.is_secondary_school %}<li class="metrics-jumper__item btn btn-dark">Postsecondary Readiness</li>{% endif %}
    <li class="metrics-jumper__item btn btn-dark">Staff</li>
  </ul>
</nav>

<section class="col-9">

{% include "includes/demographic_metrics.html" with stat=stat state=state district_name=campus.district.name district=district only %}

{% include "includes/academic_metrics.html" with stat=stat state=state district_name=campus.district.name district=district is_secondary_school=campus.is_secondary_school only %}

{% if campus.is_secondary_school %}
  {% include "includes/postsecondary_readiness_metrics.html" with stat=stat state=state district_name=campus.district.name district=district only %}
{% endif %}

{% include "includes/staff_metrics.html" with stat=stat state=state district_name=campus.district.name district=district only %}

</section>
</section>

{% endblock content %}

{% block extra_script %}
{{ block.super }}
<script>COORDS = {{ campus.coordinates.geojson|safe }};</script>
<script src="//maps.googleapis.com/maps/api/js?key=AIzaSyBrkB4T_tbnnFklJsJ_1jk8JwEpzhOYyKc"></script>
<script src="{% static 'scripts/campus.js' %}"></script>
{% endblock extra_script %}
